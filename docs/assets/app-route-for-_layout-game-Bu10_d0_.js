const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/app-libs-for-silly-tavern-_0UvqmZ2.js","assets/react-1W-rR8FQ.js","assets/index-zC5F17iY.js","assets/@tanstack-DKuuEdLe.js","assets/vendor-CsGpsoRf.js","assets/dexie-BEWXHaIH.js","assets/app-components-CsAfwMCw.js","assets/icons-1N0m32Tb.js","assets/app-hooks-D4wnnCdG.js","assets/id-OxPLOBIU.js","assets/future-lib-llm-ui-react-BOJj2ddx.js","assets/es-toolkit-CstbrnlE.js","assets/app-lib-BIt54Jc6.js","assets/components-and-styling-lnR2ABT4.js","assets/@tailwind-COJ8Fh6m.js","assets/zod-grrOrvCS.js","assets/app-libs-for-custom-theme-BHLM3087.js","assets/gsap-DDlvirwQ.js","assets/app-components-DvwNuPEv.css","assets/@radix-ui-BQCqNqg0.js","assets/immer-BCQU3qJI.js","assets/app-styles-Daz3Tiae.css"])))=>i.map(i=>d[i]);
import { _ as h, D as Te } from "./index-zC5F17iY.js";
import { b as u, l as j, r as Re, L as f, O as ae, f as $, h as ke, i as C, g as Ae, N as Ee, j as Le } from "./@tanstack-DKuuEdLe.js";
import { j as e, r as v, t as d } from "./react-1W-rR8FQ.js";
import { k as ne, U as M, H as _e, l as Me, K as Fe, c as E, m as Ne, n as Y, M as ee, o as Ve, p as Ge, q as Ue, r as oe, P as R, T as F, s as de, t as ye, D as se, u as me, v as qe, F as Be, E as be, w as je, x as Ce, y as We } from "./icons-1N0m32Tb.js";
import { S as He, a as k, C as V, m as _, b as we, c as Je, E as Ke, I as $e, d as Qe, e as Se, f as Ze, g as Xe, h as Ye, G as es, D as ss, i as ts, j as as, k as Ie, l as ns, n as rs, o as os, p as cs, q as Pe, r as ls, s as is, t as ds } from "./app-libs-for-silly-tavern-_0UvqmZ2.js";
import { q as he, r as pe, s as O, C as y, b as S, c as I, d as P, e as b, Z as ms, _ as hs, B as x, $ as ps, a0 as G, a1 as U, a2 as q, a3 as B, a4 as W, a5 as H, a6 as J, a7 as K, a8 as Q, a9 as Z, f as z, L as X, I as ge, aa as xs, ab as us, ac as ce, ad as le, ae as ie, af as js, ag as fe, ah as T, t as te } from "./app-components-CsAfwMCw.js";
import { n as De } from "./id-OxPLOBIU.js";
import { C as gs } from "./future-lib-llm-ui-react-BOJj2ddx.js";
import { a as fs } from "./app-lib-BIt54Jc6.js";
let Ks, da, ma, ha, pa, xa, ua, ja, ga, fa, ve, va, _a, Na, ya, ba, Ca, wa, $a, Sa, Ia, Pa, Da, Oa, za, Us, Bs, Hs;
let __tla = (async () => {
  let vs, _s, Ns, ys, bs, Cs, ws, $s, Ss, Is, Ps, Ds, Os, zs, Ts, Rs, ks, As, Es, Ls, Ms, Fs, Vs, Gs, qs, Ws, Js, Qs, Zs;
  vs = () => h(() => Promise.resolve().then(() => Zs), void 0);
  da = u("/_layout-game")({
    component: j(vs, "component")
  });
  _s = () => h(() => Promise.resolve().then(() => Ys), void 0);
  ma = u("/_layout-game/_silly-tavern")({
    head: () => ({
      meta: [
        {
          title: "NexTavern | AI \u89D2\u8272\u626E\u6F14\u5E73\u53F0"
        },
        {
          name: "description",
          content: "\u8F7B\u91CF\u7EA7 AI \u89D2\u8272\u626E\u6F14\u5E73\u53F0\uFF0C\u652F\u6301\u89D2\u8272\u5361\u521B\u5EFA\u3001\u6311\u6218\u8BBE\u5B9A\u548C\u5BF9\u8BDD\u4F1A\u8BDD\u7BA1\u7406"
        }
      ]
    }),
    component: j(_s, "component")
  });
  Ns = () => h(() => Promise.resolve().then(() => st), void 0);
  ha = u("/_layout-game/_silly-tavern/")({
    head: () => ({
      meta: [
        {
          title: "\u6B22\u8FCE\u6765\u5230 NexTavern | Welcome to NexTavern"
        },
        {
          name: "description",
          content: "\u6B22\u8FCE\u4F7F\u7528 NexTavern\uFF0CAI \u89D2\u8272\u626E\u6F14\u521B\u4F5C\u5E73\u53F0"
        }
      ]
    }),
    component: j(Ns, "component")
  });
  ys = () => h(() => Promise.resolve().then(() => at), void 0);
  pa = u("/_layout-game/_silly-tavern/session")({
    head: () => ({
      meta: [
        {
          title: "\u5BF9\u8BDD\u4F1A\u8BDD | Chat Sessions"
        },
        {
          name: "description",
          content: "\u7BA1\u7406\u4F60\u7684 AI \u89D2\u8272\u626E\u6F14\u5BF9\u8BDD\u4F1A\u8BDD\uFF0C\u67E5\u770B\u5386\u53F2\u8BB0\u5F55\u548C\u7EE7\u7EED\u5BF9\u8BDD"
        }
      ]
    }),
    component: j(ys, "component")
  });
  bs = () => h(() => Promise.resolve().then(() => rt), void 0);
  xa = u("/_layout-game/_silly-tavern/plaza")({
    head: () => ({
      meta: [
        {
          title: "\u89D2\u8272\u5E7F\u573A | Character Plaza"
        },
        {
          name: "description",
          content: "\u6D4F\u89C8\u548C\u9009\u62E9\u89D2\u8272\u5361\u4E0E\u6311\u6218\u5361\uFF0C\u5F00\u59CB\u4F60\u7684 AI \u89D2\u8272\u626E\u6F14\u5192\u9669"
        }
      ]
    }),
    component: j(bs, "component")
  });
  Cs = () => h(() => Promise.resolve().then(() => ct), void 0);
  ua = u("/_layout-game/_silly-tavern/create")({
    head: () => ({
      meta: [
        {
          title: "\u521B\u4F5C\u8005\u5DE5\u574A | Creator Workshop"
        },
        {
          name: "description",
          content: "\u521B\u5EFA\u548C\u7BA1\u7406\u4F60\u7684\u89D2\u8272\u5361\u4E0E\u6311\u6218\u8BBE\u5B9A\uFF0C\u6253\u9020\u72EC\u7279\u7684 AI \u89D2\u8272\u626E\u6F14\u4F53\u9A8C"
        }
      ]
    }),
    component: j(Cs, "component")
  });
  ws = () => h(() => Promise.resolve().then(() => it), void 0);
  ja = u("/_layout-game/_silly-tavern/config")({
    head: () => ({
      meta: [
        {
          title: "\u914D\u7F6E\u7BA1\u7406 | Configuration"
        },
        {
          name: "description",
          content: "\u5E94\u7528\u914D\u7F6E\u7BA1\u7406\u4E2D\u5FC3\uFF0C\u5305\u62EC LLM \u914D\u7F6E\u3001\u7CFB\u7EDF\u8BBE\u7F6E\u7B49"
        }
      ]
    }),
    component: j(ws, "component")
  });
  ga = u("/_layout-game/_silly-tavern/plaza/")({
    head: () => ({
      meta: [
        {
          title: "\u89D2\u8272\u5E7F\u573A | Character Plaza"
        },
        {
          name: "description",
          content: "SillyTavern \u89D2\u8272\u5E7F\u573A\uFF0C\u6D4F\u89C8\u89D2\u8272\u5361\u548C\u6311\u6218\u5361"
        }
      ]
    }),
    beforeLoad: () => {
      throw Re({
        to: "/plaza/characters"
      });
    }
  });
  $s = () => h(() => Promise.resolve().then(() => mt), void 0);
  fa = u("/_layout-game/_silly-tavern/config/")({
    component: j($s, "component")
  });
  Ss = () => h(() => Promise.resolve().then(() => ft), void 0);
  ve = u("/_layout-game/_silly-tavern/session/$sessionId")({
    head: () => ({
      meta: [
        {
          title: "\u5BF9\u8BDD\u4F1A\u8BDD | Chat Session"
        },
        {
          name: "description",
          content: "\u4E0E AI \u89D2\u8272\u8FDB\u884C\u5BF9\u8BDD\u4F1A\u8BDD\uFF0C\u4F53\u9A8C\u89D2\u8272\u626E\u6F14\u4E92\u52A8"
        }
      ]
    }),
    component: j(Ss, "component")
  });
  Is = () => h(() => Promise.resolve().then(() => _t), void 0);
  va = u("/_layout-game/_silly-tavern/plaza/small-town")({
    head: () => ({
      meta: [
        {
          title: "\u5C0F\u9547\u6A21\u5F0F | Small Town"
        },
        {
          name: "description",
          content: "\u591A\u89D2\u8272\u81EA\u4E3B\u751F\u6D3B\u7684\u5C0F\u9547\u6A21\u62DF\u6E38\u620F"
        }
      ]
    }),
    component: j(Is, "component")
  });
  Ps = () => h(() => Promise.resolve().then(() => yt), void 0);
  _a = u("/_layout-game/_silly-tavern/plaza/group-chat")({
    head: () => ({
      meta: [
        {
          title: "\u7FA4\u804A\u5E7F\u573A | Group Chat Plaza"
        },
        {
          name: "description",
          content: "\u6D4F\u89C8\u548C\u7BA1\u7406\u4F60\u7684\u7FA4\u804A\u4F1A\u8BDD"
        }
      ]
    }),
    component: j(Ps, "component")
  });
  Ds = () => h(() => Promise.resolve().then(() => Ct), void 0);
  Na = u("/_layout-game/_silly-tavern/plaza/dnd")({
    head: () => ({
      meta: [
        {
          title: "DnD \u5192\u9669\u5E7F\u573A | DnD Adventures"
        },
        {
          name: "description",
          content: "\u6D4F\u89C8\u548C\u7BA1\u7406\u4F60\u7684 DnD \u684C\u6E38\u5192\u9669\u4F1A\u8BDD"
        }
      ]
    }),
    component: j(Ds, "component")
  });
  Os = () => h(() => Promise.resolve().then(() => $t), void 0);
  ya = u("/_layout-game/_silly-tavern/plaza/characters")({
    head: () => ({
      meta: [
        {
          title: "\u89D2\u8272\u5361\u5E7F\u573A | Character Cards Plaza"
        },
        {
          name: "description",
          content: "\u6D4F\u89C8\u548C\u9009\u62E9\u89D2\u8272\u5361\uFF0C\u4E0E AI \u89D2\u8272\u5F00\u59CB\u5BF9\u8BDD\u548C\u89D2\u8272\u626E\u6F14"
        }
      ]
    }),
    component: j(Os, "component")
  });
  zs = () => h(() => Promise.resolve().then(() => It), void 0);
  ba = u("/_layout-game/_silly-tavern/plaza/challenges")({
    head: () => ({
      meta: [
        {
          title: "\u6311\u6218\u5361\u5E7F\u573A | Challenge Cards Plaza"
        },
        {
          name: "description",
          content: "\u6D4F\u89C8\u548C\u9009\u62E9\u6311\u6218\u5361\uFF0C\u4F53\u9A8C\u4E0D\u540C\u7684 AI \u89D2\u8272\u626E\u6F14\u6311\u6218\u6A21\u5F0F"
        }
      ]
    }),
    component: j(zs, "component")
  });
  Ts = () => h(() => Promise.resolve().then(() => Dt), void 0);
  Ca = u("/_layout-game/_silly-tavern/create_/small-town")({
    head: () => ({
      meta: [
        {
          title: "\u521B\u5EFA\u5C0F\u9547 | Create Small Town"
        },
        {
          name: "description",
          content: "\u9009\u62E9\u89D2\u8272\uFF0C\u521B\u5EFA\u4E00\u4E2A\u591A\u89D2\u8272\u81EA\u4E3B\u751F\u6D3B\u7684\u5C0F\u9547\u6A21\u62DF"
        }
      ]
    }),
    component: j(Ts, "component")
  });
  Rs = () => h(() => Promise.resolve().then(() => zt), void 0);
  wa = u("/_layout-game/_silly-tavern/create_/group-chat")({
    head: () => ({
      meta: [
        {
          title: "\u521B\u5EFA\u7FA4\u804A | Create Group Chat"
        },
        {
          name: "description",
          content: "\u9009\u62E9 AI \u89D2\u8272\u521B\u5EFA\u7FA4\u804A\u4F1A\u8BDD"
        }
      ]
    }),
    component: j(Rs, "component")
  });
  ks = () => h(() => Promise.resolve().then(() => Rt), void 0);
  $a = u("/_layout-game/_silly-tavern/create_/dnd")({
    head: () => ({
      meta: [
        {
          title: "\u521B\u5EFA DnD \u5192\u9669 | Create DnD Adventure"
        },
        {
          name: "description",
          content: "\u914D\u7F6E\u4E16\u754C\u8BBE\u5B9A\u548C\u5192\u9669\u89D2\u8272\uFF0C\u5F00\u542F\u4E00\u6BB5 DnD \u684C\u6E38\u98CE\u683C\u7684\u591A\u4EBA\u5192\u9669"
        }
      ]
    }),
    component: j(ks, "component")
  });
  As = () => h(() => Promise.resolve().then(() => At), void 0);
  Sa = u("/_layout-game/_silly-tavern/create_/chat-character")({
    head: () => ({
      meta: [
        {
          title: "\u804A\u5929\u5F0F\u521B\u5EFA\u89D2\u8272 | Chat Create Character"
        },
        {
          name: "description",
          content: "\u901A\u8FC7\u5BF9\u8BDD\u5F15\u5BFC\u521B\u5EFA AI \u89D2\u8272\u5361"
        }
      ]
    }),
    component: j(As, "component")
  });
  Es = () => h(() => Promise.resolve().then(() => Lt), void 0);
  Ia = u("/_layout-game/_silly-tavern/create_/chat-challenge")({
    head: () => ({
      meta: [
        {
          title: "\u804A\u5929\u5F0F\u521B\u5EFA\u6311\u6218 | Chat Create Challenge"
        },
        {
          name: "description",
          content: "\u901A\u8FC7\u5BF9\u8BDD\u5F15\u5BFC\u521B\u5EFA\u6311\u6218\u5361"
        }
      ]
    }),
    component: j(Es, "component")
  });
  Ls = () => h(() => Promise.resolve().then(() => Ft), void 0);
  Pa = u("/_layout-game/_silly-tavern/create_/character")({
    head: () => ({
      meta: [
        {
          title: "\u521B\u5EFA\u89D2\u8272\u5361 | Create Character Card"
        },
        {
          name: "description",
          content: "\u521B\u5EFA\u65B0\u7684 AI \u89D2\u8272\u5361\uFF0C\u5B9A\u4E49\u4EBA\u683C\u3001\u80CC\u666F\u548C\u5BF9\u8BDD\u98CE\u683C"
        }
      ]
    }),
    component: j(Ls, "component")
  });
  Ms = () => h(() => Promise.resolve().then(() => Gt), void 0);
  Da = u("/_layout-game/_silly-tavern/create_/challenge")({
    head: () => ({
      meta: [
        {
          title: "\u521B\u5EFA\u6311\u6218\u5361 | Create Challenge Card"
        },
        {
          name: "description",
          content: "\u521B\u5EFA\u65B0\u7684\u6311\u6218\u5361\uFF0C\u8BBE\u5B9A\u4E16\u754C\u53D8\u91CF\u3001\u6210\u5C31\u76EE\u6807\u548C DM \u5F15\u5BFC\u89C4\u5219"
        }
      ]
    }),
    component: j(Ms, "component")
  });
  Fs = () => h(() => Promise.resolve().then(() => qt), void 0);
  Oa = u("/_layout-game/_silly-tavern/config/settings")({
    head: () => ({
      meta: [
        {
          title: "\u5E94\u7528\u8BBE\u7F6E | Application Settings"
        },
        {
          name: "description",
          content: "\u7BA1\u7406\u5E94\u7528\u7684\u57FA\u672C\u914D\u7F6E\u3001\u504F\u597D\u8BBE\u7F6E\u548C\u7528\u6237\u9009\u9879"
        }
      ]
    }),
    component: j(Fs, "component")
  });
  Vs = () => h(() => Promise.resolve().then(() => Wt), void 0);
  za = u("/_layout-game/_silly-tavern/config/overview")({
    head: () => ({
      meta: [
        {
          title: "\u914D\u7F6E\u7BA1\u7406\u6982\u89C8 | Configuration Overview"
        },
        {
          name: "description",
          content: "\u914D\u7F6E\u7BA1\u7406\u4E2D\u5FC3\u6982\u89C8\uFF0C\u5C55\u793A\u6240\u6709\u53EF\u914D\u7F6E\u7684\u9879\u76EE\u548C\u8BBE\u7F6E"
        }
      ]
    }),
    component: j(Vs, "component")
  });
  Gs = () => h(() => Promise.resolve().then(() => Jt), void 0);
  Us = u("/_layout-game/_silly-tavern/config/llm")({
    head: () => ({
      meta: [
        {
          title: "LLM \u914D\u7F6E | LLM Configuration"
        },
        {
          name: "description",
          content: "\u7BA1\u7406\u5927\u8BED\u8A00\u6A21\u578B\u914D\u7F6E\uFF0C\u5305\u62EC API \u5BC6\u94A5\u3001\u6A21\u578B\u9009\u62E9\u548C\u8C03\u7528\u53C2\u6570"
        }
      ]
    }),
    component: j(Gs, "component")
  });
  qs = () => h(() => Promise.resolve().then(() => Qt), void 0);
  Bs = u("/_layout-game/_silly-tavern/characters_/$characterId")({
    head: () => ({
      meta: [
        {
          title: "\u89D2\u8272\u8BE6\u60C5 | Character Details"
        },
        {
          name: "description",
          content: "\u67E5\u770B\u89D2\u8272\u5361\u8BE6\u60C5\u3001\u4F1A\u8BDD\u5386\u53F2\u548C\u7BA1\u7406\u89D2\u8272\u8BBE\u7F6E"
        }
      ]
    }),
    component: j(qs, "component")
  });
  Ws = () => h(() => Promise.resolve().then(() => Xt), void 0);
  Hs = u("/_layout-game/_silly-tavern/challenges_/$challengeId")({
    head: () => ({
      meta: [
        {
          title: "\u6311\u6218\u8BE6\u60C5 | Challenge Details"
        },
        {
          name: "description",
          content: "\u67E5\u770B\u6311\u6218\u5361\u8BE6\u60C5\u3001\u89C4\u5219\u8BBE\u7F6E\u548C\u76F8\u5173\u4F1A\u8BDD\u8BB0\u5F55"
        }
      ]
    }),
    component: j(Ws, "component")
  });
  Js = () => h(() => Promise.resolve().then(() => ea), void 0);
  Ks = u("/_layout-game/_silly-tavern/characters_/$characterId_/edit")({
    head: () => ({
      meta: [
        {
          title: "\u7F16\u8F91\u89D2\u8272\u5361 | Edit Character Card"
        },
        {
          name: "description",
          content: "\u7F16\u8F91\u73B0\u6709\u89D2\u8272\u5361\u7684\u5C5E\u6027\u3001\u80CC\u666F\u548C\u5BF9\u8BDD\u8BBE\u7F6E"
        }
      ]
    }),
    component: j(Js, "component")
  });
  Qs = Te;
  Zs = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: Qs
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  function Xs() {
    return e.jsxs("div", {
      className: "flex flex-col h-full overflow-hidden",
      children: [
        e.jsxs("header", {
          className: "h-14 border-b bg-background flex items-center px-4 justify-between shrink-0",
          children: [
            e.jsxs("div", {
              className: "flex items-center gap-2",
              children: [
                e.jsxs(f, {
                  to: "/",
                  className: "flex items-center gap-2 font-bold text-lg mr-6",
                  children: [
                    e.jsx(ne, {
                      className: "w-5 h-5 text-primary"
                    }),
                    e.jsx("span", {
                      children: "NexTavern"
                    })
                  ]
                }),
                e.jsxs("nav", {
                  className: "flex items-center gap-1",
                  children: [
                    e.jsxs(f, {
                      to: "/plaza/characters",
                      className: "px-3 py-1.5 text-sm font-medium rounded-md hover:bg-muted [&.active]:bg-primary/10 [&.active]:text-primary flex items-center gap-1.5",
                      children: [
                        e.jsx(M, {
                          className: "w-4 h-4"
                        }),
                        "\u5E7F\u573A"
                      ]
                    }),
                    e.jsxs(f, {
                      to: "/create",
                      className: "px-3 py-1.5 text-sm font-medium rounded-md hover:bg-muted [&.active]:bg-primary/10 [&.active]:text-primary flex items-center gap-1.5",
                      children: [
                        e.jsx(_e, {
                          className: "w-4 h-4"
                        }),
                        "\u5DE5\u574A"
                      ]
                    }),
                    e.jsxs(f, {
                      to: "/session",
                      className: "px-3 py-1.5 text-sm font-medium rounded-md hover:bg-muted [&.active]:bg-primary/10 [&.active]:text-primary flex items-center gap-1.5",
                      children: [
                        e.jsx(Me, {
                          className: "w-4 h-4"
                        }),
                        "\u4F1A\u8BDD"
                      ]
                    })
                  ]
                })
              ]
            }),
            e.jsx("div", {
              className: "flex items-center gap-2",
              children: e.jsxs(f, {
                to: "/invitation",
                className: "px-3 py-1.5 text-xs font-medium rounded-md text-muted-foreground hover:text-foreground hover:bg-muted transition-colors flex items-center gap-2",
                children: [
                  e.jsx(Fe, {
                    className: "w-3.5 h-3.5"
                  }),
                  "\u9080\u8BF7\u7801"
                ]
              })
            })
          ]
        }),
        e.jsx("main", {
          className: "grow overflow-auto flex flex-col",
          children: e.jsx(ae, {})
        })
      ]
    });
  }
  const Ys = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: Xs
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  function et() {
    const t = $();
    return v.useEffect(() => {
      const r = setTimeout(() => {
        t({
          to: "/plaza/characters"
        });
      }, 3e3);
      return () => clearTimeout(r);
    }, [
      t
    ]), e.jsxs("div", {
      className: "flex flex-col items-center justify-center h-full bg-background space-y-6",
      children: [
        e.jsxs("div", {
          className: "relative",
          children: [
            e.jsx("div", {
              className: "absolute -inset-1 rounded-full bg-primary/20 blur-xl animate-pulse"
            }),
            e.jsx(ne, {
              className: "w-20 h-20 text-primary relative"
            })
          ]
        }),
        e.jsxs("div", {
          className: "text-center space-y-2",
          children: [
            e.jsx("h1", {
              className: "text-4xl font-bold tracking-tight",
              children: "NexTavern"
            }),
            e.jsx("p", {
              className: "text-muted-foreground",
              children: "\u6B22\u8FCE\u56DE\u6765\uFF0C\u521B\u4F5C\u8005"
            })
          ]
        }),
        e.jsx("div", {
          className: "flex items-center gap-2 text-sm text-muted-foreground animate-bounce",
          children: e.jsx("span", {
            children: "\u5373\u5C06\u8FDB\u5165\u5E7F\u573A..."
          })
        })
      ]
    });
  }
  const st = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: et
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  function tt() {
    const t = $(), { sessionId: r } = ke({
      strict: false
    }), { data: i = [] } = C((l) => l.from({
      s: k
    })), { data: a = [] } = C((l) => l.from({
      c: V
    })), s = (l) => {
      t({
        to: "/session/$sessionId",
        params: {
          sessionId: l.id
        }
      });
    }, c = () => {
      t({
        to: "/plaza/characters"
      });
    }, p = async (l) => {
      try {
        await _.sessions.delete(l.id);
      } catch (n) {
        console.error("Failed to delete session:", n);
      }
    };
    return e.jsxs("div", {
      className: "flex h-full overflow-hidden",
      children: [
        e.jsx(He, {
          sessions: i,
          characters: a,
          activeSessionId: r,
          onSessionSelect: s,
          onNewSession: c,
          onSessionDelete: p
        }),
        e.jsx("div", {
          className: "grow overflow-hidden relative",
          children: e.jsx(ae, {})
        })
      ]
    });
  }
  const at = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: tt
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  function nt() {
    const t = Ae(), r = t.pathname.includes("challenges") ? "challenges" : t.pathname.includes("group-chat") ? "group-chat" : t.pathname.includes("dnd") ? "dnd" : t.pathname.includes("small-town") ? "small-town" : "characters";
    return e.jsxs("div", {
      className: "flex flex-col h-full overflow-y-auto",
      children: [
        e.jsx("div", {
          className: "border-b px-6 py-2 bg-muted/20",
          children: e.jsx(he, {
            value: r,
            className: "w-fit",
            children: e.jsxs(pe, {
              children: [
                e.jsx(f, {
                  to: "/plaza/characters",
                  children: e.jsx(O, {
                    value: "characters",
                    children: "\u89D2\u8272\u5361"
                  })
                }),
                e.jsx(f, {
                  to: "/plaza/challenges",
                  children: e.jsx(O, {
                    value: "challenges",
                    className: "cursor-pointer",
                    children: "\u6311\u6218\u5361"
                  })
                }),
                e.jsx(f, {
                  to: "/plaza/dnd",
                  children: e.jsx(O, {
                    value: "dnd",
                    className: "cursor-pointer",
                    children: "DnD \u5192\u9669"
                  })
                }),
                e.jsx(f, {
                  to: "/plaza/group-chat",
                  children: e.jsx(O, {
                    value: "group-chat",
                    className: "cursor-pointer",
                    children: "\u7FA4\u804A"
                  })
                }),
                e.jsx(f, {
                  to: "/plaza/small-town",
                  children: e.jsx(O, {
                    value: "small-town",
                    className: "cursor-pointer",
                    children: "\u5C0F\u9547"
                  })
                })
              ]
            })
          })
        }),
        e.jsx("div", {
          className: "p-6",
          children: e.jsx(ae, {})
        })
      ]
    });
  }
  const rt = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: nt
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  function ot() {
    return e.jsxs("div", {
      className: "p-6 w-full max-w-4xl mx-auto space-y-8",
      children: [
        e.jsxs("div", {
          className: "space-y-2",
          children: [
            e.jsxs("h1", {
              className: "text-3xl font-bold flex items-center gap-2",
              children: [
                e.jsx(_e, {
                  className: "w-8 h-8 text-primary"
                }),
                "\u521B\u4F5C\u8005\u5DE5\u574A"
              ]
            }),
            e.jsx("p", {
              className: "text-muted-foreground",
              children: "\u5728\u8FD9\u91CC\u521B\u5EFA\u548C\u7BA1\u7406\u4F60\u7684\u89D2\u8272\u5361\u3001\u6311\u6218\u8BBE\u5B9A\u4E0E\u5192\u9669\u3002"
            })
          ]
        }),
        e.jsxs("div", {
          className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",
          children: [
            e.jsx(f, {
              to: "/create/character",
              children: e.jsxs(y, {
                className: "hover:border-primary transition-colors cursor-pointer group h-full",
                children: [
                  e.jsxs(S, {
                    children: [
                      e.jsx(M, {
                        className: "w-10 h-10 mb-2 group-hover:scale-110 transition-transform"
                      }),
                      e.jsx(I, {
                        children: "\u65B0\u89D2\u8272\u5361"
                      }),
                      e.jsx(P, {
                        children: "\u5B9A\u4E49\u89D2\u8272\u7684\u4EBA\u683C\u3001\u80CC\u666F\u3001\u5F00\u573A\u767D\u548C\u5BF9\u8BDD\u98CE\u683C\u3002"
                      })
                    ]
                  }),
                  e.jsx(b, {
                    children: e.jsxs("div", {
                      className: "flex items-center text-sm font-medium text-primary",
                      children: [
                        "\u7ACB\u5373\u5F00\u59CB ",
                        e.jsx(E, {
                          className: "w-4 h-4 ml-1"
                        })
                      ]
                    })
                  })
                ]
              })
            }),
            e.jsx(f, {
              to: "/create/challenge",
              children: e.jsxs(y, {
                className: "hover:border-primary transition-colors cursor-pointer group h-full",
                children: [
                  e.jsxs(S, {
                    children: [
                      e.jsx(Ne, {
                        className: "w-10 h-10 mb-2 group-hover:scale-110 transition-transform"
                      }),
                      e.jsx(I, {
                        children: "\u65B0\u6311\u6218\u5361"
                      }),
                      e.jsx(P, {
                        children: "\u8BBE\u5B9A\u4E16\u754C\u53D8\u91CF\u3001\u6210\u5C31\u76EE\u6807\u548C DM \u7684\u5F15\u5BFC\u89C4\u5219\u3002"
                      })
                    ]
                  }),
                  e.jsx(b, {
                    children: e.jsxs("div", {
                      className: "flex items-center text-sm font-medium text-primary",
                      children: [
                        "\u7ACB\u5373\u5F00\u59CB ",
                        e.jsx(E, {
                          className: "w-4 h-4 ml-1"
                        })
                      ]
                    })
                  })
                ]
              })
            }),
            e.jsx(f, {
              to: "/create/dnd",
              children: e.jsxs(y, {
                className: "hover:border-amber-500/50 transition-colors cursor-pointer group h-full",
                children: [
                  e.jsxs(S, {
                    children: [
                      e.jsx(Y, {
                        className: "w-10 h-10 mb-2 text-amber-600 group-hover:scale-110 transition-transform"
                      }),
                      e.jsx(I, {
                        children: "DnD \u5192\u9669"
                      }),
                      e.jsx(P, {
                        children: "\u914D\u7F6E\u5192\u9669\u4E16\u754C\u3001\u9009\u62E9\u89D2\u8272\u56E2\u961F\uFF0C\u5F00\u59CB\u684C\u6E38\u98CE\u683C\u7684\u591A\u4EBA\u5192\u9669\u3002"
                      })
                    ]
                  }),
                  e.jsx(b, {
                    children: e.jsxs("div", {
                      className: "flex items-center text-sm font-medium text-amber-600",
                      children: [
                        "\u7ACB\u5373\u5F00\u59CB ",
                        e.jsx(E, {
                          className: "w-4 h-4 ml-1"
                        })
                      ]
                    })
                  })
                ]
              })
            }),
            e.jsx(f, {
              to: "/create/group-chat",
              children: e.jsxs(y, {
                className: "hover:border-violet-500/50 transition-colors cursor-pointer group h-full",
                children: [
                  e.jsxs(S, {
                    children: [
                      e.jsx(ee, {
                        className: "w-10 h-10 mb-2 text-violet-500 group-hover:scale-110 transition-transform"
                      }),
                      e.jsx(I, {
                        children: "\u7FA4\u804A"
                      }),
                      e.jsx(P, {
                        children: "\u9009\u62E9\u591A\u4E2A AI \u89D2\u8272\uFF0C\u5F00\u59CB\u81EA\u7531\u7FA4\u804A\u5BF9\u8BDD\u3002"
                      })
                    ]
                  }),
                  e.jsx(b, {
                    children: e.jsxs("div", {
                      className: "flex items-center text-sm font-medium text-violet-500",
                      children: [
                        "\u7ACB\u5373\u5F00\u59CB ",
                        e.jsx(E, {
                          className: "w-4 h-4 ml-1"
                        })
                      ]
                    })
                  })
                ]
              })
            }),
            e.jsx(f, {
              to: "/create/chat-character",
              children: e.jsxs(y, {
                className: "hover:border-emerald-500/50 transition-colors cursor-pointer group h-full",
                children: [
                  e.jsxs(S, {
                    children: [
                      e.jsx(Ve, {
                        className: "w-10 h-10 mb-2 text-emerald-500 group-hover:scale-110 transition-transform"
                      }),
                      e.jsx(I, {
                        children: "\u804A\u5929\u5F0F\u521B\u5EFA\u89D2\u8272"
                      }),
                      e.jsx(P, {
                        children: "\u901A\u8FC7\u5BF9\u8BDD\u5F15\u5BFC\uFF0C\u8BA9 AI \u5E2E\u4F60\u521B\u5EFA\u89D2\u8272\u5361\u3002"
                      })
                    ]
                  }),
                  e.jsx(b, {
                    children: e.jsxs("div", {
                      className: "flex items-center text-sm font-medium text-emerald-500",
                      children: [
                        "\u7ACB\u5373\u5F00\u59CB ",
                        e.jsx(E, {
                          className: "w-4 h-4 ml-1"
                        })
                      ]
                    })
                  })
                ]
              })
            }),
            e.jsx(f, {
              to: "/create/chat-challenge",
              children: e.jsxs(y, {
                className: "hover:border-orange-500/50 transition-colors cursor-pointer group h-full",
                children: [
                  e.jsxs(S, {
                    children: [
                      e.jsx(Ge, {
                        className: "w-10 h-10 mb-2 text-orange-500 group-hover:scale-110 transition-transform"
                      }),
                      e.jsx(I, {
                        children: "\u804A\u5929\u5F0F\u521B\u5EFA\u6311\u6218"
                      }),
                      e.jsx(P, {
                        children: "\u901A\u8FC7\u5BF9\u8BDD\u5F15\u5BFC\uFF0C\u8BA9 AI \u5E2E\u4F60\u8BBE\u8BA1\u6311\u6218\u5361\u3002"
                      })
                    ]
                  }),
                  e.jsx(b, {
                    children: e.jsxs("div", {
                      className: "flex items-center text-sm font-medium text-orange-500",
                      children: [
                        "\u7ACB\u5373\u5F00\u59CB ",
                        e.jsx(E, {
                          className: "w-4 h-4 ml-1"
                        })
                      ]
                    })
                  })
                ]
              })
            })
          ]
        })
      ]
    });
  }
  const ct = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: ot
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  function lt() {
    const [t, r] = v.useState(false), i = e.jsxs(e.Fragment, {
      children: [
        e.jsx("h2", {
          className: "text-lg font-semibold mb-4",
          children: "\u914D\u7F6E\u7BA1\u7406"
        }),
        e.jsxs("ul", {
          className: "space-y-2",
          children: [
            e.jsx("li", {
              children: e.jsx(f, {
                to: "/config/overview",
                className: "block p-2 rounded hover:bg-foreground/5 md:hover:bg-background",
                onClick: () => r(false),
                children: "\u6982\u89C8"
              })
            }),
            e.jsx("li", {
              children: e.jsx(f, {
                to: "/config/llm",
                className: "block p-2 rounded hover:bg-foreground/5 md:hover:bg-background",
                onClick: () => r(false),
                children: "LLM \u914D\u7F6E"
              })
            })
          ]
        })
      ]
    });
    return e.jsxs("div", {
      className: "flex h-full",
      children: [
        e.jsx("nav", {
          className: "hidden md:block w-64 p-4 bg-foreground/5 overflow-y-auto",
          children: i
        }),
        e.jsxs(ms, {
          open: t,
          onOpenChange: r,
          children: [
            e.jsx(hs, {
              asChild: true,
              children: e.jsx(x, {
                variant: "outline",
                size: "icon",
                className: "md:hidden fixed bottom-8 left-8 rounded-full shadow-lg z-50",
                children: e.jsx(Ue, {
                  className: "h-4 w-4"
                })
              })
            }),
            e.jsx(ps, {
              side: "left",
              className: "w-64 p-4 overflow-y-auto",
              children: i
            })
          ]
        }),
        e.jsx("main", {
          className: "flex-1 p-4 lg:px-8 xl:px-12 overflow-auto",
          children: e.jsx(ae, {})
        })
      ]
    });
  }
  const it = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: lt
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  function dt() {
    return e.jsx(Ee, {
      to: "/config/overview"
    });
  }
  const mt = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: dt
  }, Symbol.toStringTag, {
    value: "Module"
  })), ht = v.lazy(() => h(() => import("./app-libs-for-silly-tavern-_0UvqmZ2.js").then((t) => t.u), __vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])).then((t) => ({
    default: t.SessionMainForChat
  }))), pt = v.lazy(() => h(() => import("./app-libs-for-silly-tavern-_0UvqmZ2.js").then((t) => t.v), __vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])).then((t) => ({
    default: t.SessionMainForChallenge
  }))), xt = v.lazy(() => h(() => import("./app-libs-for-silly-tavern-_0UvqmZ2.js").then((t) => t.w), __vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])).then((t) => ({
    default: t.SessionMainForDnd
  }))), ut = v.lazy(() => h(() => import("./app-libs-for-silly-tavern-_0UvqmZ2.js").then((t) => t.x), __vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])).then((t) => ({
    default: t.SessionMainForGroupChat
  }))), jt = v.lazy(() => h(() => import("./app-libs-for-silly-tavern-_0UvqmZ2.js").then((t) => t.y), __vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])).then((t) => ({
    default: t.SessionMainForSmallTown
  })));
  function gt() {
    var _a2;
    const { sessionId: t } = ve.useParams(), r = ve.useSearch(), { data: i = [] } = C((l) => l.from({
      s: k
    }).where(({ s: n }) => Le(n.id, t))), s = ((_a2 = i[0]) == null ? void 0 : _a2.mode) || r.mode, c = s === "dnd" ? "dnd" : s === "small-town" ? "small-town" : void 0, p = e.jsx(v.Suspense, {
      fallback: e.jsx("div", {
        className: "flex flex-col items-center justify-center h-full text-muted-foreground space-y-4",
        children: e.jsx("p", {
          children: "\u52A0\u8F7D\u4E2D..."
        })
      }),
      children: s === "dnd" ? e.jsx(xt, {
        sessionId: t
      }) : s === "group-chat" ? e.jsx(ut, {
        sessionId: t
      }) : s === "challenge" ? e.jsx(pt, {
        sessionId: t
      }) : s === "small-town" ? e.jsx(jt, {
        sessionId: t
      }) : e.jsx(ht, {
        sessionId: t
      })
    });
    return c ? e.jsx(G, {
      requiredFeature: c,
      children: p
    }) : p;
  }
  const ft = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: gt
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  function vt() {
    const t = $(), { data: r = [] } = C((s) => s.from({
      s: k
    })), i = r.filter((s) => s.mode === "small-town").sort((s, c) => c.updatedAt - s.updatedAt), a = async (s) => {
      try {
        await _.sessions.delete(s), d.success("\u5C0F\u9547\u4F1A\u8BDD\u5DF2\u5220\u9664");
      } catch (c) {
        console.error("\u5220\u9664\u5931\u8D25:", c), d.error("\u5220\u9664\u5931\u8D25");
      }
    };
    return e.jsx(G, {
      requiredFeature: "small-town",
      children: e.jsxs("div", {
        className: "space-y-6",
        children: [
          e.jsxs("div", {
            className: "flex items-center justify-between",
            children: [
              e.jsxs("div", {
                children: [
                  e.jsxs("h2", {
                    className: "text-2xl font-bold flex items-center gap-2",
                    children: [
                      e.jsx(oe, {
                        className: "w-6 h-6 text-amber-500"
                      }),
                      "\u5C0F\u9547\u6A21\u5F0F"
                    ]
                  }),
                  e.jsx("p", {
                    className: "text-sm text-muted-foreground mt-1",
                    children: "\u591A\u89D2\u8272\u81EA\u4E3B\u751F\u6D3B\u7684\u5C0F\u9547\u6A21\u62DF\u6E38\u620F"
                  })
                ]
              }),
              e.jsxs(x, {
                type: "button",
                onClick: () => t({
                  to: "/create/small-town"
                }),
                className: "gap-2",
                children: [
                  e.jsx(R, {
                    className: "w-4 h-4"
                  }),
                  "\u521B\u5EFA\u65B0\u5C0F\u9547"
                ]
              })
            ]
          }),
          i.length > 0 ? e.jsx("div", {
            className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",
            children: i.map((s) => {
              var _a2, _b, _c, _d;
              const c = ((_a2 = s.modeConfig) == null ? void 0 : _a2.worldName) || "\u672A\u547D\u540D\u5C0F\u9547", p = ((_b = s.modeConfig) == null ? void 0 : _b.characterSnapshots) || [], l = ((_d = (_c = s.modeState) == null ? void 0 : _c.gameTime) == null ? void 0 : _d.day) || 1;
              return e.jsxs(y, {
                className: "cursor-pointer hover:border-amber-500/50 transition-colors group relative",
                onClick: () => t({
                  to: "/session/$sessionId",
                  params: {
                    sessionId: s.id
                  }
                }),
                children: [
                  e.jsx(S, {
                    className: "pb-3",
                    children: e.jsxs("div", {
                      className: "flex items-start justify-between",
                      children: [
                        e.jsxs("div", {
                          className: "flex items-center gap-2",
                          children: [
                            e.jsx("div", {
                              className: "w-10 h-10 rounded-xl bg-amber-500/10 flex items-center justify-center border border-amber-500/20",
                              children: e.jsx(oe, {
                                className: "w-5 h-5 text-amber-600"
                              })
                            }),
                            e.jsxs("div", {
                              children: [
                                e.jsx(I, {
                                  className: "text-base",
                                  children: c
                                }),
                                e.jsxs(P, {
                                  className: "text-[10px]",
                                  children: [
                                    "\u7B2C ",
                                    l,
                                    " \u5929"
                                  ]
                                })
                              ]
                            })
                          ]
                        }),
                        e.jsxs(U, {
                          children: [
                            e.jsx(q, {
                              asChild: true,
                              children: e.jsx(x, {
                                type: "button",
                                variant: "ghost",
                                size: "icon",
                                className: "h-7 w-7 opacity-0 group-hover:opacity-100 transition-opacity",
                                onClick: (n) => n.stopPropagation(),
                                children: e.jsx(F, {
                                  className: "w-3.5 h-3.5 text-muted-foreground hover:text-destructive"
                                })
                              })
                            }),
                            e.jsxs(B, {
                              children: [
                                e.jsxs(W, {
                                  children: [
                                    e.jsx(H, {
                                      children: "\u786E\u8BA4\u5220\u9664"
                                    }),
                                    e.jsxs(J, {
                                      children: [
                                        "\u786E\u5B9A\u8981\u5220\u9664\u5C0F\u9547\u300C",
                                        c,
                                        "\u300D\u5417\uFF1F\u6B64\u64CD\u4F5C\u65E0\u6CD5\u64A4\u9500\u3002"
                                      ]
                                    })
                                  ]
                                }),
                                e.jsxs(K, {
                                  children: [
                                    e.jsx(Q, {
                                      children: "\u53D6\u6D88"
                                    }),
                                    e.jsx(Z, {
                                      className: "bg-destructive hover:bg-destructive/90",
                                      onClick: (n) => {
                                        n.stopPropagation(), a(s.id);
                                      },
                                      children: "\u786E\u8BA4\u5220\u9664"
                                    })
                                  ]
                                })
                              ]
                            })
                          ]
                        })
                      ]
                    })
                  }),
                  e.jsxs(b, {
                    className: "pt-0",
                    children: [
                      e.jsxs("div", {
                        className: "flex items-center gap-2 mb-3",
                        children: [
                          e.jsx(M, {
                            className: "w-3.5 h-3.5 text-muted-foreground"
                          }),
                          e.jsxs("div", {
                            className: "flex flex-wrap gap-1",
                            children: [
                              p.slice(0, 4).map((n) => e.jsx(z, {
                                variant: "secondary",
                                className: "text-[9px] px-1.5 h-4",
                                children: n.name
                              }, n.id)),
                              p.length > 4 && e.jsxs(z, {
                                variant: "secondary",
                                className: "text-[9px] px-1.5 h-4",
                                children: [
                                  "+",
                                  p.length - 4
                                ]
                              })
                            ]
                          })
                        ]
                      }),
                      e.jsxs("div", {
                        className: "flex items-center justify-between",
                        children: [
                          e.jsx("span", {
                            className: "text-[10px] text-muted-foreground",
                            children: new Date(s.updatedAt).toLocaleDateString()
                          }),
                          e.jsxs("div", {
                            className: "flex items-center gap-1 text-primary text-xs font-medium",
                            children: [
                              e.jsx(de, {
                                className: "w-3.5 h-3.5"
                              }),
                              "\u7EE7\u7EED\u6E38\u620F"
                            ]
                          })
                        ]
                      })
                    ]
                  })
                ]
              }, s.id);
            })
          }) : e.jsx(y, {
            className: "border-dashed",
            children: e.jsxs(b, {
              className: "py-16 text-center",
              children: [
                e.jsx(oe, {
                  className: "w-12 h-12 text-muted-foreground/20 mx-auto mb-4"
                }),
                e.jsx("p", {
                  className: "text-muted-foreground mb-4",
                  children: "\u8FD8\u6CA1\u6709\u5C0F\u9547\u4F1A\u8BDD"
                }),
                e.jsxs(x, {
                  type: "button",
                  variant: "outline",
                  className: "gap-2",
                  onClick: () => t({
                    to: "/create/small-town"
                  }),
                  children: [
                    e.jsx(R, {
                      className: "w-4 h-4"
                    }),
                    "\u521B\u5EFA\u7B2C\u4E00\u4E2A\u5C0F\u9547"
                  ]
                })
              ]
            })
          })
        ]
      })
    });
  }
  const _t = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: vt
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  function Nt() {
    const t = $(), { data: r = [] } = C((s) => s.from({
      s: k
    })), i = r.filter((s) => s.mode === "group-chat").sort((s, c) => c.updatedAt - s.updatedAt), a = async (s) => {
      try {
        await _.sessions.delete(s), d.success("\u7FA4\u804A\u4F1A\u8BDD\u5DF2\u5220\u9664");
      } catch (c) {
        console.error("\u5220\u9664\u5931\u8D25:", c), d.error("\u5220\u9664\u5931\u8D25");
      }
    };
    return e.jsxs("div", {
      className: "space-y-6",
      children: [
        e.jsxs("div", {
          className: "flex items-center justify-between",
          children: [
            e.jsxs("div", {
              children: [
                e.jsxs("h2", {
                  className: "text-2xl font-bold flex items-center gap-2",
                  children: [
                    e.jsx(ee, {
                      className: "w-6 h-6 text-violet-500"
                    }),
                    "\u7FA4\u804A"
                  ]
                }),
                e.jsx("p", {
                  className: "text-sm text-muted-foreground mt-1",
                  children: "\u548C\u591A\u4E2A AI \u89D2\u8272\u81EA\u7531\u804A\u5929"
                })
              ]
            }),
            e.jsxs(x, {
              type: "button",
              onClick: () => t({
                to: "/create/group-chat"
              }),
              className: "gap-2",
              children: [
                e.jsx(R, {
                  className: "w-4 h-4"
                }),
                "\u521B\u5EFA\u7FA4\u804A"
              ]
            })
          ]
        }),
        i.length > 0 ? e.jsx("div", {
          className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",
          children: i.map((s) => {
            var _a2, _b, _c;
            const c = ((_a2 = s.modeConfig) == null ? void 0 : _a2.topic) || "\u7FA4\u804A", p = ((_b = s.modeConfig) == null ? void 0 : _b.participantSnapshots) || [], l = ((_c = s.modeState) == null ? void 0 : _c.messageCount) || 0;
            return e.jsxs(y, {
              className: "cursor-pointer hover:border-violet-500/50 transition-colors group relative",
              onClick: () => t({
                to: "/session/$sessionId",
                params: {
                  sessionId: s.id
                }
              }),
              children: [
                e.jsx(S, {
                  className: "pb-3",
                  children: e.jsxs("div", {
                    className: "flex items-start justify-between",
                    children: [
                      e.jsxs("div", {
                        className: "flex items-center gap-2",
                        children: [
                          e.jsx("div", {
                            className: "w-10 h-10 rounded-xl bg-violet-500/10 flex items-center justify-center border border-violet-500/20",
                            children: e.jsx(ee, {
                              className: "w-5 h-5 text-violet-600"
                            })
                          }),
                          e.jsxs("div", {
                            children: [
                              e.jsx(I, {
                                className: "text-base",
                                children: c
                              }),
                              e.jsxs(P, {
                                className: "text-[10px]",
                                children: [
                                  l,
                                  " \u6761\u6D88\u606F"
                                ]
                              })
                            ]
                          })
                        ]
                      }),
                      e.jsxs(U, {
                        children: [
                          e.jsx(q, {
                            asChild: true,
                            children: e.jsx(x, {
                              type: "button",
                              variant: "ghost",
                              size: "icon",
                              className: "h-7 w-7 opacity-0 group-hover:opacity-100 transition-opacity",
                              onClick: (n) => n.stopPropagation(),
                              children: e.jsx(F, {
                                className: "w-3.5 h-3.5 text-muted-foreground hover:text-destructive"
                              })
                            })
                          }),
                          e.jsxs(B, {
                            children: [
                              e.jsxs(W, {
                                children: [
                                  e.jsx(H, {
                                    children: "\u786E\u8BA4\u5220\u9664"
                                  }),
                                  e.jsxs(J, {
                                    children: [
                                      "\u786E\u5B9A\u8981\u5220\u9664\u7FA4\u804A\u300C",
                                      c,
                                      "\u300D\u5417\uFF1F\u6B64\u64CD\u4F5C\u65E0\u6CD5\u64A4\u9500\u3002"
                                    ]
                                  })
                                ]
                              }),
                              e.jsxs(K, {
                                children: [
                                  e.jsx(Q, {
                                    children: "\u53D6\u6D88"
                                  }),
                                  e.jsx(Z, {
                                    className: "bg-destructive hover:bg-destructive/90",
                                    onClick: (n) => {
                                      n.stopPropagation(), a(s.id);
                                    },
                                    children: "\u786E\u8BA4\u5220\u9664"
                                  })
                                ]
                              })
                            ]
                          })
                        ]
                      })
                    ]
                  })
                }),
                e.jsxs(b, {
                  className: "pt-0",
                  children: [
                    e.jsxs("div", {
                      className: "flex items-center gap-2 mb-3",
                      children: [
                        e.jsx(M, {
                          className: "w-3.5 h-3.5 text-muted-foreground"
                        }),
                        e.jsxs("div", {
                          className: "flex flex-wrap gap-1",
                          children: [
                            p.slice(0, 4).map((n) => e.jsx(z, {
                              variant: "secondary",
                              className: "text-[9px] px-1.5 h-4",
                              children: n.name
                            }, n.id)),
                            p.length > 4 && e.jsxs(z, {
                              variant: "secondary",
                              className: "text-[9px] px-1.5 h-4",
                              children: [
                                "+",
                                p.length - 4
                              ]
                            })
                          ]
                        })
                      ]
                    }),
                    e.jsxs("div", {
                      className: "flex items-center justify-between",
                      children: [
                        e.jsx("span", {
                          className: "text-[10px] text-muted-foreground",
                          children: new Date(s.updatedAt).toLocaleDateString()
                        }),
                        e.jsxs("div", {
                          className: "flex items-center gap-1 text-primary text-xs font-medium",
                          children: [
                            e.jsx(de, {
                              className: "w-3.5 h-3.5"
                            }),
                            "\u7EE7\u7EED\u804A\u5929"
                          ]
                        })
                      ]
                    })
                  ]
                })
              ]
            }, s.id);
          })
        }) : e.jsx(y, {
          className: "border-dashed",
          children: e.jsxs(b, {
            className: "py-16 text-center",
            children: [
              e.jsx(ee, {
                className: "w-12 h-12 text-muted-foreground/20 mx-auto mb-4"
              }),
              e.jsx("p", {
                className: "text-muted-foreground mb-4",
                children: "\u8FD8\u6CA1\u6709\u7FA4\u804A\u4F1A\u8BDD"
              }),
              e.jsxs(x, {
                type: "button",
                variant: "outline",
                className: "gap-2",
                onClick: () => t({
                  to: "/create/group-chat"
                }),
                children: [
                  e.jsx(R, {
                    className: "w-4 h-4"
                  }),
                  "\u521B\u5EFA\u7B2C\u4E00\u4E2A\u7FA4\u804A"
                ]
              })
            ]
          })
        })
      ]
    });
  }
  const yt = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: Nt
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  function bt() {
    const t = $(), { data: r = [] } = C((s) => s.from({
      s: k
    })), i = r.filter((s) => s.mode === "dnd").sort((s, c) => c.updatedAt - s.updatedAt), a = async (s) => {
      try {
        await _.sessions.delete(s), d.success("\u5192\u9669\u4F1A\u8BDD\u5DF2\u5220\u9664");
      } catch (c) {
        console.error("\u5220\u9664\u5931\u8D25:", c), d.error("\u5220\u9664\u5931\u8D25");
      }
    };
    return e.jsx(G, {
      requiredFeature: "dnd",
      children: e.jsxs("div", {
        className: "space-y-6",
        children: [
          e.jsxs("div", {
            className: "flex items-center justify-between",
            children: [
              e.jsxs("div", {
                children: [
                  e.jsxs("h2", {
                    className: "text-2xl font-bold flex items-center gap-2",
                    children: [
                      e.jsx(Y, {
                        className: "w-6 h-6 text-amber-500"
                      }),
                      "DnD \u5192\u9669"
                    ]
                  }),
                  e.jsx("p", {
                    className: "text-sm text-muted-foreground mt-1",
                    children: "\u7BA1\u7406\u4F60\u7684\u684C\u6E38\u98CE\u683C\u591A\u4EBA\u5192\u9669\u4F1A\u8BDD"
                  })
                ]
              }),
              e.jsxs(x, {
                type: "button",
                onClick: () => t({
                  to: "/create/dnd"
                }),
                className: "gap-2",
                children: [
                  e.jsx(R, {
                    className: "w-4 h-4"
                  }),
                  "\u521B\u5EFA\u65B0\u5192\u9669"
                ]
              })
            ]
          }),
          i.length > 0 ? e.jsx("div", {
            className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",
            children: i.map((s) => {
              var _a2, _b, _c, _d, _e2;
              const c = ((_b = (_a2 = s.modeConfig) == null ? void 0 : _a2.worldSnapshot) == null ? void 0 : _b.name) || "\u672A\u547D\u540D\u5192\u9669", p = ((_c = s.modeConfig) == null ? void 0 : _c.gameMode) || "standard", l = ((_d = s.modeConfig) == null ? void 0 : _d.playerCharacterSnapshots) || [], n = ((_e2 = s.modeState) == null ? void 0 : _e2.currentRound) || 1;
              return e.jsxs(y, {
                className: "cursor-pointer hover:border-amber-500/50 transition-colors group relative",
                onClick: () => t({
                  to: "/session/$sessionId",
                  params: {
                    sessionId: s.id
                  }
                }),
                children: [
                  e.jsx(S, {
                    className: "pb-3",
                    children: e.jsxs("div", {
                      className: "flex items-start justify-between",
                      children: [
                        e.jsxs("div", {
                          className: "flex items-center gap-2",
                          children: [
                            e.jsx("div", {
                              className: "w-10 h-10 rounded-xl bg-amber-500/10 flex items-center justify-center border border-amber-500/20",
                              children: e.jsx(Y, {
                                className: "w-5 h-5 text-amber-600"
                              })
                            }),
                            e.jsxs("div", {
                              children: [
                                e.jsx(I, {
                                  className: "text-base",
                                  children: c
                                }),
                                e.jsxs(P, {
                                  className: "text-[10px]",
                                  children: [
                                    "\u56DE\u5408 ",
                                    n,
                                    " \xB7 ",
                                    p
                                  ]
                                })
                              ]
                            })
                          ]
                        }),
                        e.jsxs(U, {
                          children: [
                            e.jsx(q, {
                              asChild: true,
                              children: e.jsx(x, {
                                type: "button",
                                variant: "ghost",
                                size: "icon",
                                className: "h-7 w-7 opacity-0 group-hover:opacity-100 transition-opacity",
                                onClick: (o) => o.stopPropagation(),
                                children: e.jsx(F, {
                                  className: "w-3.5 h-3.5 text-muted-foreground hover:text-destructive"
                                })
                              })
                            }),
                            e.jsxs(B, {
                              children: [
                                e.jsxs(W, {
                                  children: [
                                    e.jsx(H, {
                                      children: "\u786E\u8BA4\u5220\u9664"
                                    }),
                                    e.jsxs(J, {
                                      children: [
                                        "\u786E\u5B9A\u8981\u5220\u9664\u5192\u9669\u300C",
                                        c,
                                        "\u300D\u5417\uFF1F\u6B64\u64CD\u4F5C\u65E0\u6CD5\u64A4\u9500\u3002"
                                      ]
                                    })
                                  ]
                                }),
                                e.jsxs(K, {
                                  children: [
                                    e.jsx(Q, {
                                      children: "\u53D6\u6D88"
                                    }),
                                    e.jsx(Z, {
                                      className: "bg-destructive hover:bg-destructive/90",
                                      onClick: (o) => {
                                        o.stopPropagation(), a(s.id);
                                      },
                                      children: "\u786E\u8BA4\u5220\u9664"
                                    })
                                  ]
                                })
                              ]
                            })
                          ]
                        })
                      ]
                    })
                  }),
                  e.jsxs(b, {
                    className: "pt-0",
                    children: [
                      e.jsxs("div", {
                        className: "flex items-center gap-2 mb-3",
                        children: [
                          e.jsx(M, {
                            className: "w-3.5 h-3.5 text-muted-foreground"
                          }),
                          e.jsxs("div", {
                            className: "flex flex-wrap gap-1",
                            children: [
                              l.slice(0, 4).map((o) => e.jsx(z, {
                                variant: "secondary",
                                className: "text-[9px] px-1.5 h-4",
                                children: o.name
                              }, o.id)),
                              l.length > 4 && e.jsxs(z, {
                                variant: "secondary",
                                className: "text-[9px] px-1.5 h-4",
                                children: [
                                  "+",
                                  l.length - 4
                                ]
                              })
                            ]
                          })
                        ]
                      }),
                      e.jsxs("div", {
                        className: "flex items-center justify-between",
                        children: [
                          e.jsx("span", {
                            className: "text-[10px] text-muted-foreground",
                            children: new Date(s.updatedAt).toLocaleDateString()
                          }),
                          e.jsxs("div", {
                            className: "flex items-center gap-1 text-primary text-xs font-medium",
                            children: [
                              e.jsx(de, {
                                className: "w-3.5 h-3.5"
                              }),
                              "\u7EE7\u7EED\u5192\u9669"
                            ]
                          })
                        ]
                      })
                    ]
                  })
                ]
              }, s.id);
            })
          }) : e.jsx(y, {
            className: "border-dashed",
            children: e.jsxs(b, {
              className: "py-16 text-center",
              children: [
                e.jsx(Y, {
                  className: "w-12 h-12 text-muted-foreground/20 mx-auto mb-4"
                }),
                e.jsx("p", {
                  className: "text-muted-foreground mb-4",
                  children: "\u8FD8\u6CA1\u6709 DnD \u5192\u9669\u4F1A\u8BDD"
                }),
                e.jsxs(x, {
                  type: "button",
                  variant: "outline",
                  className: "gap-2",
                  onClick: () => t({
                    to: "/create/dnd"
                  }),
                  children: [
                    e.jsx(R, {
                      className: "w-4 h-4"
                    }),
                    "\u521B\u5EFA\u7B2C\u4E00\u4E2A\u5192\u9669"
                  ]
                })
              ]
            })
          })
        ]
      })
    });
  }
  const Ct = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: bt
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  function wt() {
    const t = $(), [r, i] = v.useState(false), { data: a = [] } = C((o) => o.from({
      c: V
    })), s = (o) => {
      t({
        to: "/characters/$characterId",
        params: {
          characterId: o.id
        }
      });
    }, c = (o) => {
      t({
        to: "/characters/$characterId",
        params: {
          characterId: o.id
        }
      });
    }, p = async (o) => {
      try {
        await _.characters.add(o), d.success(`\u6210\u529F\u5BFC\u5165\u89D2\u8272: ${o.name}`);
      } catch (w) {
        d.error("\u5BFC\u5165\u5931\u8D25"), console.error(w);
      }
    }, l = async () => {
      try {
        let o = 0;
        for (const w of Qe) try {
          await _.characters.add(w), o++;
        } catch (L) {
          console.error(`Failed to import preset ${w.name}:`, L);
        }
        o > 0 ? d.success(`\u6210\u529F\u5BFC\u5165 ${o} \u4E2A\u89D2\u8272\u9884\u8BBE`) : d.error("\u6CA1\u6709\u627E\u5230\u53EF\u5BFC\u5165\u7684\u89D2\u8272\u9884\u8BBE");
      } catch (o) {
        d.error("\u5BFC\u5165\u9884\u8BBE\u5931\u8D25"), console.error(o);
      }
    }, n = e.jsxs("div", {
      className: "flex items-center gap-2",
      children: [
        e.jsxs(x, {
          variant: "outline",
          size: "sm",
          className: "hidden sm:flex items-center gap-2",
          type: "button",
          onClick: () => i(true),
          children: [
            e.jsx(ye, {
              className: "w-4 h-4"
            }),
            "\u5BFC\u5165\u89D2\u8272"
          ]
        }),
        e.jsxs(x, {
          variant: "outline",
          size: "sm",
          className: "hidden sm:flex items-center gap-2",
          type: "button",
          onClick: l,
          children: [
            e.jsx(ne, {
              className: "w-4 h-4"
            }),
            "\u5BFC\u5165\u9884\u8BBE"
          ]
        }),
        e.jsx(Ke, {
          characters: a
        }),
        e.jsxs(x, {
          variant: "default",
          size: "sm",
          className: "flex items-center gap-2",
          onClick: () => t({
            to: "/create/character"
          }),
          type: "button",
          children: [
            e.jsx(R, {
              className: "w-4 h-4"
            }),
            "\u65B0\u5EFA\u89D2\u8272"
          ]
        }),
        e.jsx($e, {
          open: r,
          onOpenChange: i,
          onImport: p
        })
      ]
    });
    return e.jsx(we, {
      items: a,
      title: "\u89D2\u8272\u5217\u8868",
      placeholder: "\u641C\u7D22\u540D\u79F0\u3001\u63CF\u8FF0\u6216\u6807\u7B7E...",
      actions: n,
      getSearchableContent: (o) => `${o.name} ${o.description} ${o.tags.join(" ")}`,
      getTags: (o) => o.tags,
      getId: (o) => o.id,
      renderCard: (o) => e.jsx(Je, {
        character: o,
        onClick: c,
        onStartSession: s
      })
    });
  }
  const $t = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: wt
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  function St() {
    const t = $(), [r, i] = v.useState(false), { data: a = [] } = C((n) => n.from({
      c: Se
    })), s = (n) => {
      t({
        to: "/challenges/$challengeId",
        params: {
          challengeId: n.id
        }
      });
    }, c = (n) => {
      t({
        to: "/challenges/$challengeId",
        params: {
          challengeId: n.id
        }
      });
    }, p = async () => {
      try {
        let n = 0;
        for (const o of Xe) try {
          await _.challenges.add(o), n++;
        } catch (w) {
          console.error(`Failed to import preset ${o.name}:`, w);
        }
        n > 0 ? d.success(`\u6210\u529F\u5BFC\u5165 ${n} \u4E2A\u6311\u6218\u9884\u8BBE`) : d.error("\u6CA1\u6709\u627E\u5230\u53EF\u5BFC\u5165\u7684\u6311\u6218\u9884\u8BBE");
      } catch (n) {
        d.error("\u5BFC\u5165\u9884\u8BBE\u5931\u8D25"), console.error(n);
      }
    }, l = e.jsxs("div", {
      className: "flex items-center gap-2",
      children: [
        e.jsxs(x, {
          variant: "outline",
          size: "sm",
          className: "hidden sm:flex items-center gap-2",
          type: "button",
          onClick: () => i(true),
          children: [
            e.jsx(ye, {
              className: "w-4 h-4"
            }),
            "\u5BFC\u5165\u6311\u6218"
          ]
        }),
        e.jsxs(x, {
          variant: "outline",
          size: "sm",
          className: "hidden sm:flex items-center gap-2",
          type: "button",
          onClick: p,
          children: [
            e.jsx(ne, {
              className: "w-4 h-4"
            }),
            "\u5BFC\u5165\u9884\u8BBE"
          ]
        }),
        e.jsxs(x, {
          variant: "outline",
          size: "sm",
          className: "hidden sm:flex items-center gap-2",
          type: "button",
          children: [
            e.jsx(se, {
              className: "w-4 h-4"
            }),
            "\u5BFC\u51FA\u6240\u6709"
          ]
        }),
        e.jsxs(x, {
          variant: "default",
          size: "sm",
          className: "flex items-center gap-2",
          onClick: () => t({
            to: "/create/challenge"
          }),
          type: "button",
          children: [
            e.jsx(R, {
              className: "w-4 h-4"
            }),
            "\u65B0\u5EFA\u6311\u6218"
          ]
        }),
        e.jsx($e, {
          open: r,
          onOpenChange: i,
          onImport: (n) => {
            d.success(`\u6210\u529F\u5BFC\u5165\u6311\u6218: ${n.name}`);
          }
        })
      ]
    });
    return e.jsx("div", {
      className: "relative",
      children: e.jsx(we, {
        items: a,
        title: "\u6311\u6218\u5217\u8868",
        placeholder: "\u641C\u7D22\u540D\u79F0\u3001\u63CF\u8FF0\u6216\u6807\u7B7E...",
        actions: l,
        getSearchableContent: (n) => {
          var _a2;
          return `${n.name} ${n.description} ${((_a2 = n.tags) == null ? void 0 : _a2.join(" ")) || ""}`;
        },
        getTags: (n) => n.tags || [],
        getId: (n) => n.id,
        renderCard: (n) => e.jsx(Ze, {
          challenge: n,
          onClick: c,
          onStartSession: s
        })
      })
    });
  }
  const It = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: St
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  function Pt() {
    return e.jsx(G, {
      requiredFeature: "small-town",
      children: e.jsx("div", {
        className: "p-6 relative",
        children: e.jsx(Ye, {})
      })
    });
  }
  const Dt = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: Pt
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  function Ot() {
    return e.jsx("div", {
      className: "p-6",
      children: e.jsx(es, {})
    });
  }
  const zt = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: Ot
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  function Tt() {
    return e.jsx(G, {
      requiredFeature: "dnd",
      children: e.jsx("div", {
        className: "p-6 relative",
        children: e.jsx(ss, {})
      })
    });
  }
  const Rt = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: Tt
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  function kt() {
    return e.jsx(ts, {});
  }
  const At = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: kt
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  function Et() {
    return e.jsx(as, {});
  }
  const Lt = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: Et
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  function Mt() {
    const t = $(), r = async (a) => {
      if (!a.name) {
        d.error("\u89D2\u8272\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A");
        return;
      }
      try {
        const s = Date.now(), p = {
          id: crypto.randomUUID(),
          name: a.name,
          description: a.description || "",
          personality: a.personality || "",
          scenario: a.scenario || "",
          first_mes: a.first_mes || "",
          mes_example: a.mes_example || "",
          creator_notes: a.creator_notes || "",
          system_prompt: a.system_prompt || "",
          post_history_instructions: a.post_history_instructions || "",
          alternate_greetings: a.alternate_greetings || [],
          tags: a.tags || [],
          extensions: a.extensions || {},
          assets: a.assets,
          avatar: a.avatar,
          imageBase64: a.imageBase64,
          character_book: a.character_book,
          nickname: a.nickname,
          source: a.source,
          creation_date: a.creation_date || s,
          modification_date: a.modification_date || s,
          creator: "User",
          character_version: "1.0",
          group_only_greetings: [],
          createdAt: s,
          updatedAt: s
        };
        await _.characters.add(p);
        const l = p;
        d.success(`\u89D2\u8272 ${l.name} \u5DF2\u521B\u5EFA`), t({
          to: "/plaza/characters"
        });
      } catch (s) {
        d.error("\u521B\u5EFA\u5931\u8D25"), console.error(s);
      }
    }, i = () => {
      t({
        to: "/create"
      });
    };
    return e.jsx("div", {
      className: "p-6 w-full max-w-5xl mx-auto",
      children: e.jsx(Ie, {
        className: "w-full",
        onSave: r,
        onCancel: i,
        mode: "create"
      })
    });
  }
  const Ft = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: Mt
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  function Vt() {
    const t = $(), r = async (a) => {
      try {
        const s = {
          ...a,
          id: De(),
          createdAt: Date.now(),
          updatedAt: Date.now()
        };
        await _.challenges.add(s), d.success("\u6311\u6218\u5361\u521B\u5EFA\u6210\u529F"), t({
          to: "/plaza/challenges"
        });
      } catch (s) {
        console.error(s), d.error("\u4FDD\u5B58\u5931\u8D25");
      }
    }, i = () => {
      t({
        to: "/plaza/challenges"
      });
    };
    return e.jsx("div", {
      className: "p-6 relative",
      children: e.jsx(ns, {
        onSave: r,
        onCancel: i
      })
    });
  }
  const Gt = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: Vt
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  function Ut() {
    const t = v.useId(), r = v.useId(), i = v.useId(), a = v.useId(), [s, c] = v.useState({
      appName: "My App",
      enableNotifications: true,
      theme: "auto",
      description: ""
    }), p = () => {
      d.success("\u8BBE\u7F6E\u5DF2\u4FDD\u5B58");
    }, l = (n, o) => {
      c((w) => ({
        ...w,
        [n]: o
      }));
    };
    return e.jsxs("div", {
      className: "space-y-6",
      children: [
        e.jsx("h1", {
          className: "text-2xl font-bold",
          children: "\u5E94\u7528\u8BBE\u7F6E"
        }),
        e.jsx("p", {
          className: "text-muted-foreground",
          children: "\u7BA1\u7406\u5E94\u7528\u7684\u57FA\u672C\u914D\u7F6E\u548C\u504F\u597D\u8BBE\u7F6E\u3002"
        }),
        e.jsxs(y, {
          children: [
            e.jsxs(S, {
              children: [
                e.jsx(I, {
                  children: "\u57FA\u672C\u8BBE\u7F6E"
                }),
                e.jsx(P, {
                  children: "\u914D\u7F6E\u5E94\u7528\u7684\u57FA\u672C\u4FE1\u606F\u548C\u884C\u4E3A\u3002"
                })
              ]
            }),
            e.jsxs(b, {
              className: "space-y-4",
              children: [
                e.jsxs("div", {
                  className: "grid grid-cols-1 md:grid-cols-2 gap-4",
                  children: [
                    e.jsxs("div", {
                      className: "space-y-2",
                      children: [
                        e.jsx(X, {
                          htmlFor: t,
                          children: "\u5E94\u7528\u540D\u79F0"
                        }),
                        e.jsx(ge, {
                          id: t,
                          value: s.appName,
                          onChange: (n) => l("appName", n.target.value)
                        })
                      ]
                    }),
                    e.jsxs("div", {
                      className: "space-y-2",
                      children: [
                        e.jsx(X, {
                          htmlFor: r,
                          children: "\u4E3B\u9898"
                        }),
                        e.jsx(ge, {
                          id: r,
                          value: s.theme,
                          onChange: (n) => l("theme", n.target.value)
                        })
                      ]
                    })
                  ]
                }),
                e.jsxs("div", {
                  className: "space-y-2",
                  children: [
                    e.jsx(X, {
                      htmlFor: i,
                      children: "\u63CF\u8FF0"
                    }),
                    e.jsx(xs, {
                      id: i,
                      value: s.description,
                      onChange: (n) => l("description", n.target.value),
                      placeholder: "\u8F93\u5165\u5E94\u7528\u63CF\u8FF0..."
                    })
                  ]
                }),
                e.jsxs("div", {
                  className: "flex items-center space-x-2",
                  children: [
                    e.jsx(us, {
                      id: a,
                      checked: s.enableNotifications,
                      onCheckedChange: (n) => l("enableNotifications", n)
                    }),
                    e.jsx(X, {
                      htmlFor: a,
                      children: "\u542F\u7528\u901A\u77E5"
                    })
                  ]
                }),
                e.jsx(x, {
                  onClick: p,
                  children: "\u4FDD\u5B58\u8BBE\u7F6E"
                })
              ]
            })
          ]
        })
      ]
    });
  }
  const qt = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: Ut
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  function Bt() {
    const t = [
      {
        name: "LLM \u914D\u7F6E",
        path: "/config/llm",
        description: "\u7BA1\u7406 LLM \u6A21\u578B\u914D\u7F6E\u3001API \u5BC6\u94A5\u548C\u8C03\u7528\u53C2\u6570\u3002"
      }
    ];
    return e.jsxs("div", {
      className: "space-y-6",
      children: [
        e.jsx("h1", {
          className: "text-2xl font-bold",
          children: "\u914D\u7F6E\u7BA1\u7406\u6982\u89C8"
        }),
        e.jsx("p", {
          className: "text-muted-foreground",
          children: "\u8FD9\u91CC\u60A8\u53EF\u4EE5\u7BA1\u7406\u672C\u5E94\u7528\u4E2D\u7684\u5404\u79CD\u914D\u7F6E\uFF0C\u5305\u62EC\u5E94\u7528\u8BBE\u7F6E\u3001\u7528\u6237\u504F\u597D\u548C\u7CFB\u7EDF\u53C2\u6570\u3002"
        }),
        e.jsx("div", {
          className: "grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",
          children: t.map((r) => e.jsxs(y, {
            className: "hover:shadow-md transition-shadow",
            children: [
              e.jsx(S, {
                children: e.jsx(I, {
                  className: "text-lg",
                  children: r.name
                })
              }),
              e.jsxs(b, {
                children: [
                  e.jsx(P, {
                    className: "mb-4",
                    children: r.description
                  }),
                  e.jsx(x, {
                    asChild: true,
                    children: e.jsx(f, {
                      to: r.path,
                      children: "\u67E5\u770B\u8BE6\u60C5"
                    })
                  })
                ]
              })
            ]
          }, r.path))
        })
      ]
    });
  }
  const Wt = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: Bt
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  function Ht() {
    const t = Us.useNavigate(), { config: r, setConfig: i, models: a, isFetchingModels: s, fetchModels: c, customParamList: p, addCustomParam: l, updateCustomParam: n, removeCustomParam: o } = fs();
    return e.jsxs("div", {
      className: "container max-w-4xl mx-auto p-4 space-y-6",
      children: [
        e.jsxs("div", {
          className: "flex items-center justify-between",
          children: [
            e.jsx("h1", {
              className: "text-3xl font-bold",
              children: "\u5168\u5C40 LLM \u914D\u7F6E"
            }),
            e.jsx(x, {
              onClick: () => t({
                to: ".."
              }),
              children: "\u8FD4\u56DE"
            })
          ]
        }),
        e.jsx(gs, {
          config: r,
          setConfig: i,
          models: a,
          isFetchingModels: s,
          fetchModels: c,
          customParamList: p,
          addCustomParam: l,
          updateCustomParam: n,
          removeCustomParam: o
        })
      ]
    });
  }
  const Jt = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: Ht
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  function Kt() {
    const { characterId: t } = Bs.useParams(), r = $(), { data: i = [] } = C((m) => m.from({
      c: V
    })), { data: a = [] } = C((m) => m.from({
      s: k
    })), s = i.find((m) => m.id === t), c = a.filter((m) => m.characterId === t), [p, l] = v.useState(false);
    if (!s) return e.jsxs("div", {
      className: "p-20 text-center flex flex-col items-center gap-4",
      children: [
        e.jsx("p", {
          className: "text-muted-foreground",
          children: "\u89D2\u8272\u4E0D\u5B58\u5728"
        }),
        e.jsx(x, {
          onClick: () => r({
            to: "/plaza/characters"
          }),
          variant: "outline",
          type: "button",
          children: "\u8FD4\u56DE\u5217\u8868"
        })
      ]
    });
    const n = (m) => {
      if (m === "challenge") {
        d.info("\u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u6311\u6218\u5267\u672C\u4EE5\u5F00\u59CB\u6311\u6218\u6A21\u5F0F"), r({
          to: "/plaza/challenges"
        });
        return;
      }
      if (m === "dnd") {
        r({
          to: "/create/dnd"
        });
        return;
      }
      if (m === "group-chat") {
        r({
          to: "/create/group-chat"
        });
        return;
      }
      l(true);
    }, w = {
      mode: "chat",
      character: s,
      onConfirm: async (m) => {
        try {
          const N = crypto.randomUUID(), D = Date.now(), g = {
            id: N,
            title: `\u4E0E ${s.name} \u7684\u804A\u5929`,
            contextId: null,
            mode: "chat",
            modeConfig: {
              characterId: s.id,
              globalSystemPrompt: m.globalSystemPrompt || null,
              userName: m.userName || "User"
            },
            modeState: {},
            characterId: s.id,
            challengeId: void 0,
            createdAt: D,
            updatedAt: D,
            isActive: true
          };
          await _.sessions.add(g), r({
            to: "/session/$sessionId",
            params: {
              sessionId: N
            },
            search: {
              mode: "chat"
            }
          });
        } catch (N) {
          console.error("Failed to create session:", N), d.error("\u521B\u5EFA\u4F1A\u8BDD\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5");
        }
      }
    }, L = () => {
      try {
        if (!s.imageBase64) {
          d.error("\u8BE5\u89D2\u8272\u6CA1\u6709\u5934\u50CF\u56FE\u7247\uFF0C\u65E0\u6CD5\u5BFC\u51FA\u4E3A PNG \u89D2\u8272\u5361");
          return;
        }
        const m = ls(s), N = URL.createObjectURL(m), D = document.createElement("a");
        D.href = N, D.download = `${s.name}.png`, D.click(), URL.revokeObjectURL(N), d.success(`\u89D2\u8272 ${s.name} \u5DF2\u5BFC\u51FA\u4E3A PNG \u89D2\u8272\u5361`);
      } catch (m) {
        console.error(m), d.error("\u5BFC\u51FA PNG \u89D2\u8272\u5361\u5931\u8D25");
      }
    }, re = async () => {
      try {
        const m = a.filter((N) => N.characterId === t);
        for (const N of m) await _.sessions.delete(N.id);
        await _.characters.delete(t), d.success("\u89D2\u8272\u5DF2\u5220\u9664"), r({
          to: "/plaza/characters"
        });
      } catch (m) {
        console.error("Failed to delete character:", m), d.error("\u5220\u9664\u89D2\u8272\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5");
      }
    };
    return e.jsxs("div", {
      className: "w-full max-w-5xl mx-auto p-4 md:p-8 space-y-8 animate-in fade-in duration-500",
      children: [
        e.jsxs("div", {
          className: "flex items-center justify-between",
          children: [
            e.jsxs(x, {
              variant: "ghost",
              size: "sm",
              className: "mb-2 -ml-2 text-muted-foreground hover:bg-transparent",
              onClick: () => r({
                to: "/plaza/characters"
              }),
              type: "button",
              children: [
                e.jsx(me, {
                  className: "w-4 h-4 mr-1"
                }),
                " \u8FD4\u56DE\u89D2\u8272\u5E7F\u573A"
              ]
            }),
            e.jsxs("div", {
              className: "flex items-center gap-2",
              children: [
                e.jsxs(ce, {
                  children: [
                    e.jsx(le, {
                      asChild: true,
                      children: e.jsxs(x, {
                        variant: "outline",
                        size: "sm",
                        className: "flex gap-2 h-8 rounded-lg",
                        type: "button",
                        children: [
                          e.jsx(se, {
                            className: "w-4 h-4"
                          }),
                          "\u5BFC\u51FA"
                        ]
                      })
                    }),
                    e.jsxs(ie, {
                      align: "end",
                      className: "w-56",
                      children: [
                        e.jsx(js, {
                          children: "\u9009\u62E9\u5BFC\u51FA\u683C\u5F0F"
                        }),
                        e.jsx(fe, {}),
                        e.jsxs(T, {
                          onClick: L,
                          children: [
                            e.jsx(qe, {
                              className: "mr-2 h-4 w-4"
                            }),
                            " \u5BFC\u51FA PNG \u89D2\u8272\u5361 (\u63A8\u8350)"
                          ]
                        }),
                        e.jsx(rs, {
                          character: s,
                          trigger: e.jsxs(T, {
                            onSelect: (m) => m.preventDefault(),
                            children: [
                              e.jsx(Be, {
                                className: "mr-2 h-4 w-4"
                              }),
                              " \u5BFC\u51FA JSON \u539F\u59CB\u6570\u636E"
                            ]
                          })
                        })
                      ]
                    })
                  ]
                }),
                e.jsxs(ce, {
                  children: [
                    e.jsx(le, {
                      asChild: true,
                      children: e.jsx(x, {
                        variant: "ghost",
                        size: "icon",
                        className: "h-8 w-8 rounded-full",
                        type: "button",
                        children: e.jsx(be, {
                          className: "w-4 h-4"
                        })
                      })
                    }),
                    e.jsxs(ie, {
                      align: "end",
                      className: "w-48",
                      children: [
                        e.jsxs(T, {
                          onClick: () => r({
                            to: "/characters/$characterId/edit",
                            params: {
                              characterId: s.id
                            }
                          }),
                          children: [
                            e.jsx(je, {
                              className: "mr-2 h-4 w-4"
                            }),
                            " \u7F16\u8F91\u89D2\u8272"
                          ]
                        }),
                        e.jsxs(T, {
                          children: [
                            e.jsx(Ce, {
                              className: "mr-2 h-4 w-4"
                            }),
                            " \u5206\u4EAB\u89D2\u8272"
                          ]
                        }),
                        e.jsx(fe, {}),
                        e.jsxs(U, {
                          children: [
                            e.jsx(q, {
                              asChild: true,
                              children: e.jsxs(T, {
                                onSelect: (m) => m.preventDefault(),
                                className: "text-destructive focus:bg-destructive/10 focus:text-destructive",
                                children: [
                                  e.jsx(F, {
                                    className: "mr-2 h-4 w-4"
                                  }),
                                  " \u5220\u9664\u89D2\u8272"
                                ]
                              })
                            }),
                            e.jsxs(B, {
                              children: [
                                e.jsxs(W, {
                                  children: [
                                    e.jsx(H, {
                                      children: "\u786E\u8BA4\u5220\u9664\u89D2\u8272"
                                    }),
                                    e.jsxs(J, {
                                      children: [
                                        '\u786E\u5B9A\u8981\u5220\u9664\u89D2\u8272 "',
                                        s.name,
                                        '" \u5417\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u64A4\u9500\uFF0C\u4E14\u4F1A\u6E05\u9664\u6240\u6709\u5173\u8054\u7684\u4F1A\u8BDD\u8BB0\u5F55\u3002'
                                      ]
                                    })
                                  ]
                                }),
                                e.jsxs(K, {
                                  children: [
                                    e.jsx(Q, {
                                      children: "\u53D6\u6D88"
                                    }),
                                    e.jsx(Z, {
                                      onClick: re,
                                      className: "bg-destructive hover:bg-destructive/90",
                                      children: "\u786E\u8BA4\u5220\u9664"
                                    })
                                  ]
                                })
                              ]
                            })
                          ]
                        })
                      ]
                    })
                  ]
                })
              ]
            })
          ]
        }),
        e.jsxs("div", {
          className: "flex flex-col md:flex-row gap-8 items-start pb-8 border-b",
          children: [
            e.jsx("div", {
              className: "w-40 h-40 rounded-3xl bg-muted flex items-center justify-center shrink-0 border-4 border-background shadow-xl overflow-hidden",
              children: s.imageBase64 || s.avatar ? e.jsx("img", {
                src: s.imageBase64 || s.avatar,
                alt: s.name,
                className: "w-full h-full object-cover"
              }) : e.jsx(We, {
                className: "w-20 h-20 text-muted-foreground/30"
              })
            }),
            e.jsxs("div", {
              className: "space-y-5 grow",
              children: [
                e.jsxs("div", {
                  className: "space-y-1",
                  children: [
                    e.jsxs("div", {
                      className: "flex items-center gap-3",
                      children: [
                        e.jsx("h1", {
                          className: "text-4xl font-extrabold tracking-tight",
                          children: s.name
                        }),
                        e.jsxs(x, {
                          variant: "outline",
                          size: "sm",
                          onClick: () => r({
                            to: "/characters/$characterId/edit",
                            params: {
                              characterId: s.id
                            }
                          }),
                          className: "flex items-center gap-2",
                          type: "button",
                          children: [
                            e.jsx(je, {
                              className: "w-4 h-4"
                            }),
                            "\u7F16\u8F91"
                          ]
                        })
                      ]
                    }),
                    e.jsx("p", {
                      className: "text-xl text-muted-foreground font-medium",
                      children: s.nickname || s.name
                    })
                  ]
                }),
                e.jsx("div", {
                  className: "flex flex-wrap gap-2",
                  children: s.tags.map((m) => e.jsx(z, {
                    variant: "secondary",
                    className: "px-3 py-1 font-medium",
                    children: m
                  }, m))
                }),
                e.jsxs("p", {
                  className: "text-base leading-relaxed text-muted-foreground/90 max-w-2xl",
                  children: [
                    s.description.slice(0, 200),
                    s.description.length > 200 ? "..." : ""
                  ]
                })
              ]
            })
          ]
        }),
        e.jsxs(he, {
          defaultValue: "sessions",
          className: "w-full",
          children: [
            e.jsxs(pe, {
              className: "w-full justify-start h-12 bg-muted/50 p-1 mb-6",
              children: [
                e.jsx(O, {
                  value: "sessions",
                  className: "px-8 h-10 data-[state=active]:shadow-sm",
                  children: "\u4F1A\u8BDD & \u8BB0\u5F55"
                }),
                e.jsx(O, {
                  value: "details",
                  className: "px-8 h-10 data-[state=active]:shadow-sm",
                  children: "\u6863\u6848\u8BE6\u60C5"
                })
              ]
            }),
            e.jsx(te, {
              value: "sessions",
              className: "mt-0",
              children: e.jsx("div", {
                className: "grid grid-cols-1 md:grid-cols-1 gap-8",
                children: e.jsx(os, {
                  characterId: s.id,
                  sessions: c,
                  onStartNew: n
                })
              })
            }),
            e.jsx(te, {
              value: "details",
              className: "mt-0",
              children: e.jsx(cs, {
                character: s
              })
            })
          ]
        }),
        e.jsx(Pe, {
          open: p,
          onOpenChange: l,
          wizardProps: w
        })
      ]
    });
  }
  const Qt = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: Kt
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  function Zt() {
    var _a2;
    const { challengeId: t } = Hs.useParams(), r = $(), { data: i = [] } = C((g) => g.from({
      c: Se
    })), a = i.find((g) => g.id === t), { data: s = [] } = C((g) => g.from({
      s: k
    })), { data: c = [] } = C((g) => g.from({
      char: V
    })), p = s.filter((g) => g.challengeId === t), [l, n] = v.useState(false), [o, w] = v.useState(null);
    if (!a) return e.jsxs("div", {
      className: "p-20 text-center flex flex-col items-center gap-4",
      children: [
        e.jsx("p", {
          className: "text-muted-foreground",
          children: "\u6311\u6218\u4E0D\u5B58\u5728"
        }),
        e.jsx(x, {
          onClick: () => r({
            to: "/plaza/challenges"
          }),
          variant: "outline",
          type: "button",
          children: "\u8FD4\u56DE\u5217\u8868"
        })
      ]
    });
    const L = (g) => {
      w(g), n(true);
    }, re = async () => {
      if (o) try {
        const g = De(), xe = Date.now(), ue = {};
        for (const [A, ze] of Object.entries(a.variables)) ue[A] = {
          key: A,
          value: ze.initial
        };
        const Oe = {
          id: g,
          title: `${a.name}`,
          contextId: null,
          mode: "challenge",
          modeConfig: {
            characterId: o,
            roleTaskPrompt: a.roleTaskPrompt,
            userGuidance: a.userGuidance,
            variables: a.variables,
            goals: a.goals,
            failureChecks: a.failureChecks
          },
          modeState: {
            currentPhase: "dm_intro",
            currentUIState: "idle",
            variableStates: ue,
            goalStates: a.goals.map((A) => ({
              key: A.key,
              checkCount: 0,
              isMet: false
            })),
            failureStates: a.failureChecks.map((A) => ({
              key: A.key,
              checkCount: 0,
              isMet: false
            }))
          },
          characterId: o,
          challengeId: a.id,
          createdAt: xe,
          updatedAt: xe,
          isActive: true
        };
        await _.sessions.add(Oe), r({
          to: "/session/$sessionId",
          params: {
            sessionId: g
          },
          search: {
            mode: "challenge"
          }
        });
      } catch (g) {
        console.error("Failed to create challenge session:", g), d.error("\u521B\u5EFA\u4F1A\u8BDD\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5");
      }
    }, m = c.find((g) => g.id === o), N = m ? {
      mode: "challenge",
      character: m,
      challenge: a,
      onConfirm: re
    } : null, D = () => {
      d.success(`\u6B63\u5728\u5BFC\u51FA\u6311\u6218 ${a.name}...`);
    };
    return e.jsxs("div", {
      className: "max-w-5xl mx-auto p-4 md:p-8 space-y-8 animate-in fade-in slide-in-from-bottom-2 duration-500 relative",
      children: [
        e.jsxs("div", {
          className: "flex items-center justify-between",
          children: [
            e.jsxs(x, {
              variant: "ghost",
              size: "sm",
              className: "mb-2 -ml-2 text-muted-foreground hover:bg-transparent",
              onClick: () => r({
                to: "/plaza/challenges"
              }),
              type: "button",
              children: [
                e.jsx(me, {
                  className: "w-4 h-4 mr-1"
                }),
                " \u8FD4\u56DE\u6311\u6218\u5E7F\u573A"
              ]
            }),
            e.jsxs("div", {
              className: "flex items-center gap-2",
              children: [
                e.jsxs(x, {
                  variant: "outline",
                  size: "sm",
                  className: "hidden sm:flex gap-2 h-8 rounded-lg",
                  onClick: D,
                  type: "button",
                  children: [
                    e.jsx(se, {
                      className: "w-4 h-4"
                    }),
                    "\u5BFC\u51FA\u6311\u6218"
                  ]
                }),
                e.jsxs(ce, {
                  children: [
                    e.jsx(le, {
                      asChild: true,
                      children: e.jsx(x, {
                        variant: "ghost",
                        size: "icon",
                        className: "h-8 w-8 rounded-full",
                        type: "button",
                        children: e.jsx(be, {
                          className: "w-4 h-4"
                        })
                      })
                    }),
                    e.jsxs(ie, {
                      align: "end",
                      className: "w-48",
                      children: [
                        e.jsxs(T, {
                          onClick: D,
                          className: "sm:hidden",
                          children: [
                            e.jsx(se, {
                              className: "mr-2 h-4 w-4"
                            }),
                            " \u5BFC\u51FA JSON"
                          ]
                        }),
                        e.jsxs(T, {
                          children: [
                            e.jsx(Ce, {
                              className: "mr-2 h-4 w-4"
                            }),
                            " \u5206\u4EAB\u6311\u6218"
                          ]
                        }),
                        e.jsxs(U, {
                          children: [
                            e.jsx(q, {
                              asChild: true,
                              children: e.jsxs(T, {
                                onSelect: (g) => g.preventDefault(),
                                className: "text-destructive focus:bg-destructive/10 focus:text-destructive",
                                children: [
                                  e.jsx(F, {
                                    className: "mr-2 h-4 w-4"
                                  }),
                                  " \u5220\u9664\u6311\u6218"
                                ]
                              })
                            }),
                            e.jsxs(B, {
                              children: [
                                e.jsxs(W, {
                                  children: [
                                    e.jsx(H, {
                                      children: "\u786E\u8BA4\u5220\u9664\u6311\u6218"
                                    }),
                                    e.jsxs(J, {
                                      children: [
                                        "\u786E\u5B9A\u8981\u5220\u9664\u6311\u6218\u300C",
                                        a.name,
                                        "\u300D\u5417\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u64A4\u9500\u3002"
                                      ]
                                    })
                                  ]
                                }),
                                e.jsxs(K, {
                                  children: [
                                    e.jsx(Q, {
                                      children: "\u53D6\u6D88"
                                    }),
                                    e.jsx(Z, {
                                      className: "bg-destructive hover:bg-destructive/90",
                                      onClick: async () => {
                                        await _.challenges.delete(a.id), d.success("\u6311\u6218\u5DF2\u5220\u9664"), r({
                                          to: "/plaza/challenges"
                                        });
                                      },
                                      children: "\u786E\u8BA4\u5220\u9664"
                                    })
                                  ]
                                })
                              ]
                            })
                          ]
                        })
                      ]
                    })
                  ]
                })
              ]
            })
          ]
        }),
        e.jsxs("div", {
          className: "flex flex-col md:flex-row gap-8 items-start pb-8 border-b",
          children: [
            e.jsx("div", {
              className: "w-40 h-40 rounded-3xl bg-primary/10 flex items-center justify-center shrink-0 border-4 border-background shadow-xl overflow-hidden",
              children: e.jsx(Ne, {
                className: "w-20 h-20 text-primary"
              })
            }),
            e.jsxs("div", {
              className: "space-y-4 grow",
              children: [
                e.jsxs("div", {
                  className: "space-y-2",
                  children: [
                    e.jsx(z, {
                      variant: "outline",
                      className: "text-primary bg-primary/5 border-primary/20 uppercase tracking-widest text-[10px] px-2",
                      children: "Challenge Scenario"
                    }),
                    e.jsx("h1", {
                      className: "text-4xl font-extrabold tracking-tight",
                      children: a.name
                    })
                  ]
                }),
                e.jsx("div", {
                  className: "flex flex-wrap gap-2",
                  children: (_a2 = a.tags) == null ? void 0 : _a2.map((g) => e.jsx(z, {
                    variant: "secondary",
                    className: "px-3 py-1 font-medium",
                    children: g
                  }, g))
                }),
                e.jsxs("p", {
                  className: "text-lg leading-relaxed text-muted-foreground italic font-serif",
                  children: [
                    '" ',
                    a.description.slice(0, 150),
                    '... "'
                  ]
                })
              ]
            })
          ]
        }),
        e.jsxs(he, {
          defaultValue: "details",
          className: "w-full",
          children: [
            e.jsxs(pe, {
              className: "w-full justify-start h-12 bg-muted/50 p-1 mb-6",
              children: [
                e.jsx(O, {
                  value: "details",
                  className: "px-8 h-10 data-[state=active]:shadow-sm",
                  children: "\u6311\u6218\u8BE6\u60C5"
                }),
                e.jsx(O, {
                  value: "sessions",
                  className: "px-8 h-10 data-[state=active]:shadow-sm",
                  children: "\u5173\u8054\u4F1A\u8BDD"
                })
              ]
            }),
            e.jsx(te, {
              value: "details",
              className: "mt-0",
              children: e.jsx(is, {
                challenge: a
              })
            }),
            e.jsx(te, {
              value: "sessions",
              className: "mt-0",
              children: e.jsx(ds, {
                challengeId: a.id,
                sessions: p,
                characters: c,
                onStartNew: L
              })
            })
          ]
        }),
        N && e.jsx(Pe, {
          open: l,
          onOpenChange: n,
          wizardProps: N
        })
      ]
    });
  }
  const Xt = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: Zt
  }, Symbol.toStringTag, {
    value: "Module"
  }));
  function Yt() {
    const { characterId: t } = Ks.useParams(), r = $(), { data: i = [] } = C((l) => l.from({
      c: V
    })), a = i.find((l) => l.id === t);
    if (!a) return e.jsxs("div", {
      className: "p-20 text-center flex flex-col items-center gap-4",
      children: [
        e.jsx("p", {
          className: "text-muted-foreground",
          children: "\u89D2\u8272\u4E0D\u5B58\u5728"
        }),
        e.jsx(x, {
          onClick: () => r({
            to: "/plaza/characters"
          }),
          variant: "outline",
          type: "button",
          children: "\u8FD4\u56DE\u5217\u8868"
        })
      ]
    });
    const s = async (l) => {
      try {
        const n = Date.now(), o = {
          ...a,
          ...l,
          updatedAt: n,
          modification_date: n
        };
        await _.characters.put(o), d.success(`\u89D2\u8272 ${a.name} \u5DF2\u66F4\u65B0`), r({
          to: "/characters/$characterId",
          params: {
            characterId: a.id
          }
        });
      } catch (n) {
        console.error("Failed to update character:", n), d.error("\u66F4\u65B0\u89D2\u8272\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5");
      }
    }, c = () => {
      r({
        to: "/characters/$characterId",
        params: {
          characterId: a.id
        }
      });
    }, p = a;
    return e.jsxs("div", {
      className: "w-full max-w-5xl mx-auto p-4 md:p-8 space-y-6",
      children: [
        e.jsxs("div", {
          className: "flex items-center gap-2",
          children: [
            e.jsxs(x, {
              variant: "ghost",
              size: "sm",
              className: "text-muted-foreground hover:bg-transparent",
              onClick: c,
              type: "button",
              children: [
                e.jsx(me, {
                  className: "w-4 h-4 mr-1"
                }),
                " \u53D6\u6D88\u7F16\u8F91"
              ]
            }),
            e.jsxs("h1", {
              className: "text-xl font-bold",
              children: [
                "\u7F16\u8F91\u89D2\u8272: ",
                a.name
              ]
            })
          ]
        }),
        e.jsx(Ie, {
          onSave: s,
          onCancel: c,
          initialData: p,
          mode: "edit"
        })
      ]
    });
  }
  const ea = Object.freeze(Object.defineProperty({
    __proto__: null,
    component: Yt
  }, Symbol.toStringTag, {
    value: "Module"
  }));
})();
export {
  Ks as A,
  da as R,
  __tla,
  ma as a,
  ha as b,
  pa as c,
  xa as d,
  ua as e,
  ja as f,
  ga as g,
  fa as h,
  ve as i,
  va as j,
  _a as k,
  Na as l,
  ya as m,
  ba as n,
  Ca as o,
  wa as p,
  $a as q,
  Sa as r,
  Ia as s,
  Pa as t,
  Da as u,
  Oa as v,
  za as w,
  Us as x,
  Bs as y,
  Hs as z
};
